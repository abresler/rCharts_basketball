<div id = {{ chartId }}>
  <svg width="684.28723" height="593.86169" id = "court">
  <g id="layer1">
    <path
       d="m 300.59857,466.35993 0,-26.25329 c 27.86656,-48.12034 74.69135,-20.19278 78.70369,-0.21985 l 0.21503,26.36081"
       transform="translate(0,-31.499512)"
       id="path3038"
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 312.96447,575.40702 a 56.944443,49.537037 0 0 1 113.88466,-0.84377 l -56.94172,0.48411 z"
       transform="matrix(0.96548697,0,0,1.125369,-16.539492,-356.62005)"
       id="path3827"
       style="fill:none;stroke:#000000;stroke-width:4.31709719;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <path
       d="m 312.96447,575.40702 a 56.944443,49.537037 0 0 1 113.88466,-0.84377 l -56.94172,0.48411 z"
       transform="matrix(-0.96553311,0.0013626,-0.0015601,-1.1276718,698.60535,937.9458)"
       id="path3827-1"
       style="fill:none;stroke:#000000;stroke-width:4.31257963;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:12.93773985, 12.93773985;stroke-dashoffset:0" />
    <rect
       width="579.78723"
       height="488.29788"
       x="52.25"
       y="21.814301"
       id="rect2996"
       style="opacity:0.63999999;fill:none;stroke:#c60000;stroke-width:4.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="485.10638"
       height="456.38297"
       x="97.994675"
       y="20.750488"
       id="rect2998"
       style="opacity:0.65;fill:none;stroke:#48ab18;stroke-width:4.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="23.148148"
       height="185.18518"
       x="263.43994"
       y="292.2438"
       id="rect3797"
       style="opacity:0.65;fill:#ce2e5c;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-opacity:1" />
    <rect
       width="21.296297"
       height="183.33333"
       x="398.62512"
       y="292.2438"
       id="rect3799"
       style="opacity:0.65;fill:#ce2f5c;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-opacity:1" />
    <path
       d="m 346.2963,454.50986 a 8.7962961,7.8703704 0 1 1 -17.5926,0 8.7962961,7.8703704 0 1 1 17.5926,0 z"
       transform="matrix(0.82641594,0,0,0.92364132,60.495047,2.6052752)"
       id="path3822"
       style="fill:none;stroke:#e8ab18;stroke-width:2.2891748;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <path
       d="m 325.79711,435.19494 25.09395,-0.15133"
       id="path3824"
       style="fill:none;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
    <rect
       width="3.7037036"
       height="3.7037036"
       x="337.69171"
       y="430.53293"
       id="rect3826"
       style="fill:#e8ab18;fill-opacity:1;stroke:none" />
    <rect
       width="30.555555"
       height="135.18518"
       x="99.551025"
       y="339.46603"
       id="A"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="77.777779"
       height="95.370369"
       ry="0"
       x="131.95844"
       y="340.39194"
       id="G"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="52.777775"
       height="96.296295"
       x="210.66214"
       y="340.39194"
       id="N"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="68.75"
       height="98.379631"
       x="419.68991"
       y="339.23453"
       id="Q"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="62.962963"
       height="96.296295"
       x="488.43994"
       y="338.54007"
       id="K"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="28.703703"
       height="137.03703"
       x="553.2547"
       y="338.54007"
       id="E"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="62.037037"
       height="39.814816"
       x="490.29175"
       y="435.7623"
       id="L"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="71.296295"
       height="38.888889"
       x="418.99548"
       y="436.6882"
       id="R"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="79.629631"
       height="38.888889"
       x="131.0325"
       y="437.61417"
       id="F"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="52.777779"
       height="38.888889"
       x="211.58806"
       y="438.54007"
       id="M"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <path
       d="m 265.29177,476.27157 72.68518,0 -12.55587,-41.20371 -60.12931,0.69445 0,40.50926"
       id="S"
       style="fill:none;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
    <path
       d="m 418.06952,476.50305 0.37314,-40.74074 -67.30884,-0.38353 -13.61985,41.12427 80.55555,0"
       id="W"
       style="fill:none;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
    <path
       d="m 274.43528,263.54009 -36.9213,0 -0.92593,75.92592 c 9.2591,0.0676 18.51868,0.0676 27.77778,0 10.10904,-0.0738 20.21749,-0.2281 30.32407,-0.46296 l -20.25462,-75.46296"
       id="O"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 445.84731,339.46601 0,-72.22222 -37.03703,-0.92592 c -3.54031,8.58397 -6.93602,17.22758 -10.18519,25.92592 -5.74718,15.38576 -11.0358,30.94281 -15.85648,46.64353 11.45624,0.29801 22.91522,0.49092 34.375,0.57869 9.56771,0.0733 19.13599,0.0733 28.7037,0"
       id="P"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 264.59732,437.1512 -1.15741,-97.68518 30.55556,0 31.48147,96.29629 -60.87962,1.38889"
       id="T"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 552.3288,338.54009 -106.48149,0 -0.23148,-71.75926 -36.80555,-0.23148 21.29629,-53.93518 c 76.85185,34.5679 102.77778,82.09876 122.22223,125.92592 z"
       id="J"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 129.18065,339.46601 108.33333,0.92593 0,-76.85185 36.57407,-0.23148 -15.27777,-54.39815 C 183.193,238.54009 139.05719,303.3549 129.18065,339.46601 z"
       id="H"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 226.40287,99.651194 31.94445,108.796296 c 44.13581,-14.81481 116.51234,-19.90741 169.90741,4.16667 L 468.99546,99.651194 z"
       id="C"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 350.93991,435.99379 31.94445,-97.4537 36.34258,0.92592 0.46297,96.75926 z"
       id="V"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="M 337.97695,475.57713 294.6899,339.1188 l 87.96297,-0.34723 z"
       id="U"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 258.34731,208.4475 35.99537,130.32408 87.38426,-0.92594 47.45371,-125.23148 C 371.15596,187.30552 303.40904,194.40429 258.34731,208.4475 z"
       id="I"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
  </g>
</svg>
</div>

<script>
  var params = {{{ chartParams }}}
  var svg = d3.select("svg")
  tip = d3.tip().html(function(d) {
    return d.datum().key + ":" + d3.format(".2%")(d.datum().value) ;
  });

  /* Invoke the tip in the context of your visualization */
  svg.call(tip)
  
  //match the data with the regions
  svg.selectAll("path, rect")[0].forEach(function(region){
    //get the shape with d3
    var regionShape = d3.select(region)
    //look for the id of the shape in the data
    var dataid = d3.values(params.data.region).indexOf(regionShape.attr("id"))
    //if id is greater than 0 then we found the id in data
    //in this example we found a region
    if (dataid >= 0) {
      regionShape.datum(
        {"key": regionShape.attr("id"),
          "value" : params.data[ params.y ][dataid]
        }
      )
      .attr("class","regionData")
    }
  })
  
  //thanks http://stackoverflow.com/questions/17671252/d3-create-a-continous-color-scale-with-many-strings-inputs-for-the-range-and-dy
  var heatmapColor = d3.scale.linear()
    .domain(d3.range(0, 1, 1.0 / (params.colors.length - 1)))
    .range(params.colors);
  
  //redundant for now
  //but might need this in the future
  var c = d3.scale.linear().domain([0,1]).range([0,1]);
    
  svg.selectAll(".regionData")
    .style("fill", function(d) {
      return heatmapColor(c(d.value));
    })
    .style("fill-opacity", 0.6)
    .on("mouseover", function(){
      d3.select(this).style("stroke-width",6)
      tip.show(d3.select(this))
    })
    .on("mouseout", function(){
      d3.select(this).style("stroke-width",2)
      tip.hide(d3.select(this))
    });
    
    
</script>
</body>

</html>