<!doctype HTML>
<meta charset = 'utf-8'>
<html>
  <head>
    
    <script src='http://d3js.org/d3.v3.js' type='text/javascript'></script>
    <script src='http://timelyportfolio.github.io/rCharts_basketball/js/d3.tip.v0.6.3.js' type='text/javascript'></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.1/angular.min.js' type='text/javascript'></script>
    
    <style>
    .rChart {
      display: block;
      margin-left: auto; 
      margin-right: auto;
      width: 800px;
      height: 400px;
    }  
    </style>
    
  </head>
  <body ng-app ng-controller='rChartsCtrl'>
    
    
     <div class='container'>
        <select ng-model='player' class='form-control'
           ng-options='player for player in ["Kevin Durant","Larry Bird","Lebron James","Michael Jordan"]'>
          
        </select>
     </div>
           
     <script>
     function rChartsCtrl($scope){
        $scope.player = 'Kevin Durant';
        $scope.$watch('player', function(choice){
          drawChart(
            d3.nest().key(function(d){
              return d[0]
            }).map(d3.zip.apply(this,d3.values(params.data)))[choice]
          );
        })
      }
     </script>
          
    <div id = chart2db852d3c2c>
  <svg width="684.28723" height="593.86169" id = "court">
  <g id="layer1">
    <path
       d="m 438.70968,47.490726 a 93.145164,89.919357 0 1 1 -186.29033,-4e-6 l 93.14516,4e-6 z"
       transform="matrix(0.95238095,0,0,0.95075405,8.7941628,-25.151976)"
       id="path3813"
       style="fill:none;stroke:#000000;stroke-width:2.10179591;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <path
       d="m 438.70968,47.490726 a 93.145164,89.919357 0 1 1 -186.29033,-4e-6 l 93.14516,4e-6 z"
       transform="matrix(0.84848485,0,0,0.83524188,44.696971,-20.449223)"
       id="path3813-1"
       style="fill:none;stroke:#000000;stroke-width:2.37575603;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <path
       d="m 300.59857,466.35993 0,-26.25329 c 27.86656,-48.12034 74.69135,-20.19278 78.70369,-0.21985 l 0.21503,26.36081"
       transform="translate(0,-31.499512)"
       id="path3038"
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 312.96447,575.40702 a 56.944443,49.537037 0 0 1 113.88466,-0.84377 l -56.94172,0.48411 z"
       transform="matrix(0.96548697,0,0,1.125369,-16.539492,-356.62005)"
       id="path3827"
       style="fill:none;stroke:#000000;stroke-width:4.31709719;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <path
       d="m 312.96447,575.40702 a 56.944443,49.537037 0 0 1 113.88466,-0.84377 l -56.94172,0.48411 z"
       transform="matrix(-0.96553311,0.0013626,-0.0015601,-1.1276718,698.60535,937.9458)"
       id="path3827-1"
       style="fill:none;stroke:#000000;stroke-width:4.31257963;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:12.93773985, 12.93773985;stroke-dashoffset:0" />
    <rect
       width="579.78723"
       height="489.91077"
       x="52.25"
       y="20.201397"
       id="rect2996"
       style="opacity:0.63999999;fill:none;stroke:#c60000;stroke-width:4.49999952;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="485.10638"
       height="456.38297"
       x="97.994675"
       y="20.750488"
       id="rect2998"
       style="opacity:0.65;fill:none;stroke:#48ab18;stroke-width:4.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="23.148148"
       height="184.36678"
       x="263.43994"
       y="292.2438"
       id="rect3797"
       style="opacity:0.65;fill:#ce2e5c;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:1;stroke-opacity:1" />
    <rect
       width="21.296297"
       height="183.33333"
       x="398.62512"
       y="292.2438"
       id="rect3799"
       style="opacity:0.65;fill:#ce2f5c;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-opacity:1" />
    <path
       d="m 346.2963,454.50986 a 8.7962961,7.8703704 0 1 1 -17.5926,0 8.7962961,7.8703704 0 1 1 17.5926,0 z"
       transform="matrix(0.82641594,0,0,0.92364132,60.495047,2.6052752)"
       id="path3822"
       style="fill:none;stroke:#e8ab18;stroke-width:2.2891748;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <path
       d="m 325.79711,435.19494 25.09395,-0.15133"
       id="path3824"
       style="fill:none;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
    <rect
       width="3.7037036"
       height="3.7037036"
       x="337.69171"
       y="430.53293"
       id="rect3826"
       style="fill:#e8ab18;fill-opacity:1;stroke:none" />
    <path
       d="m 323.49224,102.96466 c -32.26649,-5.773338 -58.53356,-27.678697 -68.49012,-57.117191 -1.69947,-5.024793 -4.46118,-18.665277 -4.489,-22.171782 -0.003,-0.32958 1.56226,-0.599237 3.47749,-0.599237 l 3.48224,0 0.90878,6.729272 c 2.0645,15.286983 9.37184,29.959833 20.59714,41.358252 32.35001,32.848886 86.52555,32.567616 118.22815,-0.613833 10.83614,-11.341621 17.41913,-24.323064 20.03442,-39.507232 l 1.37212,-7.966459 3.16256,0 3.16257,0 -0.52501,6.153327 c -1.43394,16.80647 -10.49226,35.561489 -23.43625,48.524206 -11.81106,11.828136 -24.67222,19.121868 -41.99181,23.814087 -6.47295,1.75365 -28.62599,2.62532 -35.49328,1.39659 z"
       id="path3835"
       style="fill:#c70000;fill-opacity:0.63921569;fill-rule:nonzero;stroke:#000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="30.889977"
       height="135.85402"
       x="99.551025"
       y="339.46603"
       id="A"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="80.118729"
       height="96.373627"
       ry="0"
       x="130.62076"
       y="340.05753"
       id="G"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="52.777775"
       height="96.296295"
       x="210.66214"
       y="340.39194"
       id="N"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="68.75"
       height="98.379631"
       x="419.68991"
       y="339.23453"
       id="Q"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="64.272423"
       height="98.424164"
       x="488.43997"
       y="338.54007"
       id="K"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="28.703703"
       height="137.03703"
       x="553.2547"
       y="338.54007"
       id="E"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="64.492271"
       height="38.832722"
       x="488.49124"
       y="436.74438"
       id="L"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="69.332108"
       height="38.888889"
       x="418.99548"
       y="436.6882"
       id="R"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="80.390007"
       height="39.235249"
       x="130.56081"
       y="436.61304"
       id="F"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <rect
       width="53.098087"
       height="39.490799"
       x="210.94038"
       y="436.24854"
       id="M"
       style="opacity:0.65;fill:#d7c488;fill-opacity:0.96724058;fill-rule:nonzero;stroke:#48ab18;stroke-width:1.99999988;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <path
       d="m 265.29177,476.27157 72.68518,0 -12.55587,-41.20371 -60.12931,0.69445 0,40.50926"
       id="S"
       style="fill:none;stroke:#48ab18;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
    <path
       d="m 418.72123,476.08416 0.37616,-40.32576 -67.85338,-0.37963 -13.73004,40.70539 81.20726,0"
       id="W"
       style="fill:none;stroke:#48ab18;stroke-width:1.99999976;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
    <path
       d="m 274.43528,263.54009 -36.9213,0 -0.92593,75.92592 c 9.2591,0.0676 18.51868,0.0676 27.77778,0 10.10904,-0.0738 20.21749,-0.2281 30.32407,-0.46296 l -20.25462,-75.46296"
       id="O"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 445.84731,339.46601 0,-72.22222 -37.03703,-0.92592 c -3.54031,8.58397 -6.93602,17.22758 -10.18519,25.92592 -5.74718,15.38576 -11.0358,30.94281 -15.85648,46.64353 11.45624,0.29801 22.91522,0.49092 34.375,0.57869 9.56771,0.0733 19.13599,0.0733 28.7037,0"
       id="P"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 264.59732,437.1512 -1.15741,-97.68518 30.55556,0 31.48147,96.29629 -60.87962,1.38889"
       id="T"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 552.3288,338.54009 -106.48149,0 -0.23148,-71.75926 -36.80555,-0.23148 21.29629,-53.93518 c 76.85185,34.5679 102.77778,82.09876 122.22223,125.92592 z"
       id="J"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 129.18065,339.46601 108.33333,0.92593 0,-76.85185 36.57407,-0.23148 -15.27777,-54.39815 C 183.193,238.54009 139.05719,303.3549 129.18065,339.46601 z"
       id="H"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 350.93991,435.99379 31.94445,-97.4537 36.34258,0.92592 0.46297,96.75926 z"
       id="V"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="M 337.97695,475.57713 294.6899,339.1188 l 87.96297,-0.34723 z"
       id="U"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 258.34731,208.4475 35.99537,130.32408 87.38426,-0.92594 47.45371,-125.23148 C 371.15596,187.30552 303.40904,194.40429 258.34731,208.4475 z"
       id="I"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="M 258.06452,208.59874 202.68817,21.501967 97.849462,20.964333 98.387097,339.2439 l 30.107523,0 c 23.29749,-48.92473 52.50897,-98.92473 129.5699,-130.64516 z"
       id="B"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 201.6129,51.92621 56.98925,189.24731 c 66.12903,-25.80645 140.32258,-12.36559 170.96774,3.22581 L 498.92473,52.463845 z"
       transform="translate(0,-31.499512)"
       id="C"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       d="m 429.56989,243.32406 c 73.4767,34.58781 93.7276,67.02509 122.04301,126.34409 l 31.72043,0.53763 0,-317.741933 -84.94623,-2e-6 z"
       transform="translate(0,-31.499512)"
       id="D"
       style="fill:none;stroke:#48ab18;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
  </g>
</svg>
</div>

<script>
  var params = {
 "dom": "chart2db852d3c2c",
"width":    800,
"height":    400,
"data": {
 "player": [ "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Michael Jordan", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Larry Bird", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Kevin Durant", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James", "Lebron James" ],
"region": [ "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W" ],
"pct": [ 0.38686, 0.72172, 0.014404, 0.14299, 0.11439, 0.12095, 0.38009, 0.37775, 0.55254, 0.037197, 0.30368, 0.6895, 0.28966, 0.50126, 0.55367, 0.71755, 0.25691, 0.17301, 0.52681, 0.72887, 0.59663, 0.58809, 0.29935, 0.23012, 0.33231, 0.63144, 0.38605, 0.2218, 0.55426, 0.45059, 0.4323, 0.76828, 0.67365, 0.065474, 0.20333, 0.15035, 0.075428, 0.75088, 0.67243, 0.79918, 0.075087, 0.25137, 0.71786, 0.38647, 0.46126, 0.58953, 0.5074, 0.10538, 0.22745, 0.44412, 0.67725, 0.59296, 0.37132, 0.15121, 0.21594, 0.054221, 0.56768, 0.28191, 0.18314, 0.49056, 0.15349, 0.54457, 0.29894, 0.17678, 0.49185, 0.065084, 0.60772, 0.53199, 0.5324, 0.22249, 0.21481, 0.18014, 0.056483, 0.66451, 0.54206, 0.40023, 0.2544, 0.59725, 0.76666, 0.083204, 0.2097, 0.28798, 0.30211, 0.6884, 0.17274, 0.024621,  0.703, 0.24762, 0.75305, 0.04688, 0.41895, 0.54544 ] 
},
"y": "pct",
"colors": [ "#B2182B", "#D6604D", "#F4A582", "#FDDBC7", "#D1E5F0", "#92C5DE", "#4393C3", "#2166AC" ],
"bodyattrs": "ng-app ng-controller='rChartsCtrl'",
"id": "chart2db852d3c2c" 
}
  
  function drawChart(data){
    //do tranform of the data from angular
    //ugly but trying not to use any other js libraries
    var datakeys = d3.keys(params.data);
    var plotdata = data.map(function(d){
      var tempObj = {}
      datakeys.forEach(function(key, i){
        tempObj[key] = d[i];
      })
      return tempObj;
    })    
    var svg = d3.select(chart2db852d3c2c).select("svg")
    tip = d3.tip().html(function(d) {
      return d.datum().key + ":" + d3.format(".2%")(d.datum().value) ;
    });
    
    /* Invoke the tip in the context of your visualization */
    svg.call(tip)
    
    //match the data with the regions
    svg.selectAll("path, rect")[0].forEach(function(region){
      //get the shape with d3
      var regionShape = d3.select(region)
      //look for the id of the shape in the data
      var dataid = plotdata.filter(function(d){
        return d.region === regionShape.attr("id")
      })
      //if id is greater than 0 then we found the id in data
      //in this example we found a region
      if (dataid.length > 0) {
        regionShape.datum(
          {"key": regionShape.attr("id"),
            "value" : dataid[0][ params.y ]
          }
        )
        .attr("class","regionData")
      }
    })
    
    //thanks http://stackoverflow.com/questions/17671252/d3-create-a-continous-color-scale-with-many-strings-inputs-for-the-range-and-dy
    var heatmapColor = d3.scale.linear()
      .domain(d3.range(0, 1, 1.0 / (params.colors.length - 1)))
      .range(params.colors);
    
    //redundant for now
    //but might need this in the future
    var c = d3.scale.linear().domain([0,1]).range([0,1]);
      
    svg.selectAll(".regionData")
      .style("fill", function(d) {
        return heatmapColor(c(d.value));
      })
      .style("fill-opacity", 0.6)
      .on("mouseover", function(){
        d3.select(this).style("stroke-width",6)
        tip.show(d3.select(this))
      })
      .on("mouseout", function(){
        d3.select(this).style("stroke-width",2)
        tip.hide(d3.select(this))
      });
      
    } 
</script>
</body>

</html>
    
    <script></script>    
  </body>
</html>
